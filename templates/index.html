{% extends 'base.html' %}

{% block title %}Healthcare Symptom Checker{% endblock %}

{% block content %}
  <header>
    <h1>Healthcare Symptom Checker</h1>
    <p class="muted">Educational demo. Not medical advice.</p>
  </header>

  <section class="new-chat">
    <button id="newChatBtn">Start New Symptom Check</button>
  </section>

  <section class="chats">
    <h2>Your Chats</h2>
    <ul id="chatList">
      {% for c in chats %}
      <li><a href="/chat/{{ c.id }}">{{ c.title }} <small>{{ c.created_at }}</small></a></li>
      {% else %}
      <li>No chats yet</li>
      {% endfor %}
    </ul>
  </section>

  {% block scripts %}
  <script>
    document.getElementById('newChatBtn').addEventListener('click', async () => {
      const res = await fetch('/api/chats', {method: 'POST', headers: {'Content-Type': 'application/json'}});
      const body = await res.json();
      window.location = '/chat/' + body.id;
    });
  </script>
  {% endblock %}
{% endblock %}
